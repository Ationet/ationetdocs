![ationetlogo](Content/Images/ATIOnetLogo_250x70.png)
# Ationet Fleet Mobile Payment - Wallet Implementation #

|Información de Documento||
|--- |--- |
|Archivo:|ATIONet - Fleet Mobile Payment Wallet Implementation|
|Doc Version:|1.0|
|Fecha:|06-06-2025|
|Autor:|Alexis E. Yañez|

|Control de Cambios |||
|--- |--- |--- |
|Ver.|Fecha|Cambios|
|1.0|06-06-2025|Initial version.|

## Contenido ##
- [Introducción](#Introducción)
- [Mensajería Transaccional](#mensajería-transaccional)
  - [Mensajería Wallet](#mensajería-wallet)
     - [Authorize](#authorize)
     - [Get Transaction](#transaction-data)




## Introducción
Este documento describe la operación que debe implementar una billetera que se quiere integrar con el servicio de Fleet Mobile Payment de Ationet.


## Mensajería Transaccional
A continuación se describe las operaciones que debe implementar la billetera para integrarse con el servicio de Ationet Fleet Mobile Payment.

### Mensajería Wallet

#### Authorize 

<b>Relative URL:</b> URLAmbiente/v{{Version}}/MPA/prepaid/{{PosId}}/Authorize</br>
<b>Method:</b> POST </br>
<b>Input:</b> application/json </br>
<b>Output:</b> application/json </br>
<b>Uso:</b> Permite generar una transacción que será procesada por el flujo PrePago 
<b>Request Body:</b>
Vacío
<b>Response Body:</b>
Se obtiene un HTTP Response 200 o 400 dependiendo si se pudo procesar correctamente el request. 
En el caso de obtener un HTTP Code 200, se obtiene:
1) El TransactionId creado.
2) La información necesaria para procesar la operación: selección de producto, URL de notificación de pago, fecha de creación de la transacción, flag que identifica si el request fue procesado correctamente (IsSuccess).

```json
{
    "IsSuccess": boolean,
    "ResponseCode": string,
    "ResponseMessage": string,
    "TransactionId": guid,
    "NotificationUrl": string,
    "DateCreated": DateTime,
    "Nozzles": [
          {
            "nozzleNo": string,
            "productNo": string,
            "tankNo1": string,
            "prices": [
                {
                  "fuelUnitPrice": {
                      "value": string,
                      "currency": string
                  },
                  "priceTier": string,
                  "modeNo": string
                }
            ],
            "productCode": string
          }
    ]
}
```



#### Transaction Data
<b>Relative URL:</b> URLAmbiente/v{{Version}}/MPA/prepaid/Transaction/{transactionId}</br>
<b>Method:</b> GET </br>
<b>Input:</b> application/json </br>
<b>Output:</b> application/json </br>
<b>Uso:</b> Permite obtener los datos de una transacción generada por el Authorize
<b>Request Body:</b>
Vacío
<b>Response Body:</b>
```json
{
  "id": guid,
  "siteCode": string,
  "primaryTrack": string,
  "odometer": long,
  "terminalIdentification": string,
  "transactionSequenceNumber": long,
  "state_Name": string,
  "state_Id": int,
  "paymentProcessorReferenceId": string,
  "paymentProcessorMessage": string,
  "siteSystemMessage": string,
  "fuelPointNumber": int,
  "paymentMethod": string,
  "requestedAmount": decimal,
  "authorizedAmount": decimal,
  "dispatchedAmount": decimal,
  "dispatchedQuantity": decimal?,
  "productCode": string,
  "productDescription": string,
  "productUnitPrice": decimal?,
  "unitMeasure": string,
  "createDateTime": Datetime,
  "updateDateTime": Datetime,
  "idDispatch": guid
}
```



